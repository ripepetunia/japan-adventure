<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Japan Adventure (Debug)</title>
<style>
  body{margin:0;font-family:-apple-system,system-ui;background:#0b1220;color:#fff}
  .app{max-width:620px;margin:auto;padding:16px}
  .card{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:12px;margin:12px 0}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:12px;white-space:pre-wrap;word-break:break-word}
  .ok{color:#86efac;font-weight:700}
  .bad{color:#fca5a5;font-weight:800}
  button{padding:10px 12px;border-radius:10px;border:none;font-weight:700}
</style>
</head>
<body>
<div class="app">
  <h1>ðŸ‡¯ðŸ‡µ Japan Adventure</h1>
  <div class="card">
    <div class="ok" id="status">Bootingâ€¦</div>
    <div class="mono" id="details">If this stays stuck, JS is not executing.</div>
  </div>

  <div class="card" id="ui">
    <div>UI placeholderâ€¦</div>
  </div>

  <div class="card">
    <button onclick="location.reload()">Reload</button>
    <button onclick="localStorage.clear()">Clear Local Storage</button>
  </div>
</div>

<script>
(function(){
  const statusEl  = document.getElementById("status");
  const detailsEl = document.getElementById("details");
  const uiEl      = document.getElementById("ui");

  function setOK(msg){
    statusEl.className = "ok";
    statusEl.textContent = msg;
  }
  function setBAD(msg){
    statusEl.className = "bad";
    statusEl.textContent = msg;
  }
  function log(line){
    detailsEl.textContent += "\n" + line;
  }

  // Catch runtime errors
  window.onerror = function(message, source, lineno, colno, error){
    setBAD("JavaScript error (window.onerror)");
    log("message: " + message);
    log("source: " + source);
    log("line: " + lineno + " col: " + colno);
    if (error && error.stack) log("stack:\n" + error.stack);
    return true;
  };

  window.onunhandledrejection = function(e){
    setBAD("Promise rejection (unhandled)");
    log(String(e.reason && (e.reason.stack || e.reason) || e));
  };

  // Prove JS is running
  setOK("JS is running âœ…");
  detailsEl.textContent = "User agent:\n" + navigator.userAgent + "\n\nLocation:\n" + location.href;

  // Minimal render test
  uiEl.innerHTML = `
    <div style="font-weight:800;margin-bottom:8px;">Render test</div>
    <div>If you can read this, DOM updates are working.</div>
    <div style="margin-top:10px;">Time: <span id="t"></span></div>
  `;
  document.getElementById("t").textContent = new Date().toString();

  // Confirm localStorage works
  try{
    localStorage.setItem("ja_debug", "ok");
    log("\nlocalStorage: ok");
  }catch(err){
    setBAD("localStorage blocked");
    log("localStorage error: " + (err && err.message ? err.message : String(err)));
  }
})();
</script>
</body>
</html>
