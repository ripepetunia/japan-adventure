<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Our Japan Adventure</title>

<style>
body {
  margin: 0;
  font-family: -apple-system, system-ui;
  background: #0b1220;
  color: white;
}
.app {
  max-width: 520px;
  margin: auto;
  padding: 16px 16px 90px;
}
h1 { margin: 0 0 6px; }
.card {
  background: rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 12px;
  margin-bottom: 12px;
}
button, input {
  padding: 10px;
  border-radius: 10px;
  border: none;
  font-size: 15px;
}
.primary { background:#7dd3fc; color:#000; }
.small { opacity:.75; font-size:13px; }
.mission {
  display:flex; justify-content:space-between; align-items:center;
  background: rgba(255,255,255,0.08);
  padding:10px; border-radius:10px; margin-bottom:8px;
}
.stickers { font-size:32px; line-height:1.4; }

.tabs {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: #111827;
  display: flex;
  border-top: 1px solid rgba(255,255,255,0.1);
}
.tabs button {
  flex:1;
  background:none;
  color:white;
  padding:12px;
  font-weight:600;
}
.tabs button.active {
  background:#1f2937;
}
progress { width:100%; height:16px; }
</style>
</head>

<body>
<div class="app">
  <div id="screen"></div>
</div>

<div class="tabs">
  <button onclick="setTab('adventure')" id="tab-adventure">ğŸ’ Adventure</button>
  <button onclick="setTab('money')" id="tab-money">ğŸ’° Money</button>
  <button onclick="setTab('places')" id="tab-places">ğŸ“ Places</button>
</div>

<script>
let tab = localStorage.getItem("tab") || "adventure";
const KEY_STICKERS = "japan_stickers";
const KEY_MONEY = "japan_money";

const missions = {
  tokyo:[
    {t:"Ride a super train",s:"ğŸš…"},
    {t:"Eat ramen",s:"ğŸœ"},
    {t:"Find a robot",s:"ğŸ¤–"}
  ],
  kyoto:[
    {t:"Visit a temple",s:"â›©ï¸"},
    {t:"Try a new snack",s:"ğŸ®"}
  ],
  osaka:[
    {t:"Try sushi",s:"ğŸ£"},
    {t:"Find a tall view",s:"ğŸ—»"}
  ]
};

function setTab(t){
  tab=t;
  localStorage.setItem("tab",t);
  render();
}

function getStickers(){
  return JSON.parse(localStorage.getItem(KEY_STICKERS)||"[]");
}
function saveSticker(s){
  let a=getStickers(); a.push(s);
  localStorage.setItem(KEY_STICKERS,JSON.stringify(a));
  render();
}

function getMoney(){
  return JSON.parse(localStorage.getItem(KEY_MONEY)||JSON.stringify({
    flights:{saved:0,goal:3000},
    hotels:{saved:0,goal:2500},
    food:{saved:0,goal:1500}
  }));
}
function saveMoney(m){
  localStorage.setItem(KEY_MONEY,JSON.stringify(m));
}

function render(){
  document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
  document.getElementById("tab-"+tab).classList.add("active");

  if(tab==="adventure") renderAdventure();
  if(tab==="money") renderMoney();
  if(tab==="places") renderPlaces();
}

function renderAdventure(){
  let s=getStickers();
  screen.innerHTML=`
    <h1>ğŸ‡¯ğŸ‡µ Our Japan Adventure</h1>
    <div class="small">Do missions. Earn stickers.</div>

    ${Object.keys(missions).map(city=>`
      <div class="card">
        <strong>${city.toUpperCase()}</strong><br><br>
        ${missions[city].map(m=>`
          <div class="mission">
            <div>${m.t}</div>
            <button class="primary" onclick="saveSticker('${m.s}')">Earn ${m.s}</button>
          </div>
        `).join("")}
      </div>
    `).join("")}

    <div class="card">
      <strong>ğŸ’ Stickers</strong><br><br>
      <div class="stickers">${s.length?s.join(" "):"No stickers yet"}</div>
    </div>
  `;
}

function renderMoney(){
  let m=getMoney();
  screen.innerHTML=`
    <h1>ğŸ’° Money Goals</h1>
    <div class="small">Fill the bars to unlock Japan.</div>

    ${Object.keys(m).map(k=>`
      <div class="card">
        <strong>${k.toUpperCase()}</strong>
        <progress value="${m[k].saved}" max="${m[k].goal}"></progress>
        <div class="small">$${m[k].saved} / $${m[k].goal}</div><br>
        <button onclick="m[k].saved+=100; saveMoney(m); render()">Add $100</button>
      </div>
    `).join("")}
  `;
}

function renderPlaces(){
  screen.innerHTML=`
    <h1>ğŸ“ Places & Experiences</h1>
    <div class="small">Weâ€™ll build this next.</div>

    <div class="card">
      Examples:
      <ul>
        <li>âš¾ Tokyo baseball game</li>
        <li>ğŸ¢ Tokyo Disney</li>
        <li>ğŸ›ï¸ Hiroshima Peace Memorial Museum</li>
      </ul>
    </div>
  `;
}

render();
</script>
</body>
</html>
